language: python

python:
    - 2.7

sudo: false

env:
    - EXAODBC_URL = https://www.exasol.com/support/secure/attachment/38806/
    - EXAODBC_DRV_FILE = EXASOL_ODBC-5.0.13
    - secure: EXAHOST = 213.95.157.20..24:8563
    - secure: EXAUSER = PUB1351
    - secure: EXAPW = pbFKDM9g3

warnings_are_errors: false

before_install:
    # get unixODBC
    - wget www.unixodbc.org/unixODBC-2.3.4.tar.gz
    
    # get EXAODBC
    - wget https://www.exasol.com/support/secure/attachment/38806/EXASOL_ODBC-5.0.13.tar.gz

    # get conda
    - wget https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh

   
install:
    - pip install pyodbc
    - pip install unittest
    
    # install unixodbc
    - tar -xzf unixODBC-2.3.4.tar.gz
    - ./unixODBC-2.3.4/configure --prefix=$HOME/unixodbc
    - make
    - make install
    
    # install EXAODBC
    - tar -xzf EXASOL_ODBC-5.0.13.tar.gz
    - ./XASolution_ODBC-5.0.13/config_odbc --mode=config $HOME/exasol_odbc --host=213.95.157.20..24:8563 --user=PUB1351 --password=pbFKDM9g3 --force
    
    #install conda und pandas
    - conda create -n conda_env python
    - source active conda_env
    - bash Miniconda2-latest-Linux-x86_64.sh -b -p $HOME/miniconda
    - conda install pandas 

script:
    - python tests/test.py 
    - python tests/selftest.py
    - python tests/data_exchange.py
    - python tests/udf_sdk.py
    - ./tests/pylint.sh

